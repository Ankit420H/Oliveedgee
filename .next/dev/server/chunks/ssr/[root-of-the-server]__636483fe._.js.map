{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/ankitkumaryadav/Desktop/Olive-Edge/src/context/CartContext.jsx"],"sourcesContent":["'use client';\n\nimport { createContext, useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\n\nconst CartContext = createContext();\n\nexport const CartProvider = ({ children }) => {\n    const [cartItems, setCartItems] = useState([]);\n    const [shippingAddress, setShippingAddress] = useState({});\n    const [paymentMethod, setPaymentMethod] = useState('Razorpay');\n    const [isInitialized, setIsInitialized] = useState(false);\n\n    // Initialize from LocalStorage\n    useEffect(() => {\n        const storedCart = localStorage.getItem('cartItems');\n        if (storedCart) {\n            setCartItems(JSON.parse(storedCart));\n        }\n\n        const storedAddress = localStorage.getItem('shippingAddress');\n        if (storedAddress) {\n            setShippingAddress(JSON.parse(storedAddress));\n        }\n\n        const storedPayment = localStorage.getItem('paymentMethod');\n        if (storedPayment) {\n            setPaymentMethod(JSON.parse(storedPayment));\n        }\n        setIsInitialized(true);\n    }, []);\n\n    // Sync updates to LocalStorage\n    useEffect(() => {\n        if (isInitialized) {\n            localStorage.setItem('cartItems', JSON.stringify(cartItems));\n        }\n    }, [cartItems, isInitialized]);\n\n    useEffect(() => {\n        if (isInitialized) {\n            localStorage.setItem('shippingAddress', JSON.stringify(shippingAddress));\n        }\n    }, [shippingAddress, isInitialized]);\n\n    useEffect(() => {\n        if (isInitialized) {\n            localStorage.setItem('paymentMethod', JSON.stringify(paymentMethod));\n        }\n    }, [paymentMethod, isInitialized]);\n\n    const addToCart = (product, qty) => {\n        const existItem = cartItems.find((x) => x.product === product._id);\n        const currentQty = existItem ? existItem.qty : 0;\n        const finalQty = currentQty + qty;\n\n        if (finalQty > product.countInStock) {\n            toast.error(`Stock limit reached. Max available: ${product.countInStock}`);\n            return;\n        }\n\n        const item = {\n            product: product._id,\n            name: product.name,\n            image: product.image,\n            price: product.price,\n            countInStock: product.countInStock,\n            qty: finalQty,\n            size: product.size // Ensure size is preserved if passed in product object\n        };\n\n        let newCartItems;\n        if (existItem) {\n            newCartItems = cartItems.map((x) =>\n                x.product === existItem.product ? item : x\n            );\n        } else {\n            newCartItems = [...cartItems, item];\n        }\n\n        setCartItems(newCartItems);\n    };\n\n    const removeFromCart = (id) => {\n        const newCartItems = cartItems.filter((x) => x.product !== id);\n        setCartItems(newCartItems);\n    };\n\n    const saveShippingAddress = (data) => {\n        setShippingAddress(data);\n    };\n\n    const savePaymentMethod = (data) => {\n        setPaymentMethod(data);\n    };\n\n    const clearCart = () => {\n        setCartItems([]);\n        localStorage.removeItem('cartItems');\n    };\n\n    return (\n        <CartContext.Provider value={{\n            cartItems,\n            addToCart,\n            removeFromCart,\n            clearCart,\n            shippingAddress,\n            saveShippingAddress,\n            paymentMethod,\n            savePaymentMethod\n        }}>\n            {children}\n        </CartContext.Provider>\n    );\n};\n\nexport default CartContext;\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,4BAAc,IAAA,sNAAa;AAE1B,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC7C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC,CAAC;IACxD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IAEnD,+BAA+B;IAC/B,IAAA,kNAAS,EAAC;QACN,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,YAAY;YACZ,aAAa,KAAK,KAAK,CAAC;QAC5B;QAEA,MAAM,gBAAgB,aAAa,OAAO,CAAC;QAC3C,IAAI,eAAe;YACf,mBAAmB,KAAK,KAAK,CAAC;QAClC;QAEA,MAAM,gBAAgB,aAAa,OAAO,CAAC;QAC3C,IAAI,eAAe;YACf,iBAAiB,KAAK,KAAK,CAAC;QAChC;QACA,iBAAiB;IACrB,GAAG,EAAE;IAEL,+BAA+B;IAC/B,IAAA,kNAAS,EAAC;QACN,IAAI,eAAe;YACf,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;QACrD;IACJ,GAAG;QAAC;QAAW;KAAc;IAE7B,IAAA,kNAAS,EAAC;QACN,IAAI,eAAe;YACf,aAAa,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC;QAC3D;IACJ,GAAG;QAAC;QAAiB;KAAc;IAEnC,IAAA,kNAAS,EAAC;QACN,IAAI,eAAe;YACf,aAAa,OAAO,CAAC,iBAAiB,KAAK,SAAS,CAAC;QACzD;IACJ,GAAG;QAAC;QAAe;KAAc;IAEjC,MAAM,YAAY,CAAC,SAAS;QACxB,MAAM,YAAY,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,QAAQ,GAAG;QACjE,MAAM,aAAa,YAAY,UAAU,GAAG,GAAG;QAC/C,MAAM,WAAW,aAAa;QAE9B,IAAI,WAAW,QAAQ,YAAY,EAAE;YACjC,4JAAK,CAAC,KAAK,CAAC,CAAC,oCAAoC,EAAE,QAAQ,YAAY,EAAE;YACzE;QACJ;QAEA,MAAM,OAAO;YACT,SAAS,QAAQ,GAAG;YACpB,MAAM,QAAQ,IAAI;YAClB,OAAO,QAAQ,KAAK;YACpB,OAAO,QAAQ,KAAK;YACpB,cAAc,QAAQ,YAAY;YAClC,KAAK;YACL,MAAM,QAAQ,IAAI,CAAC,uDAAuD;QAC9E;QAEA,IAAI;QACJ,IAAI,WAAW;YACX,eAAe,UAAU,GAAG,CAAC,CAAC,IAC1B,EAAE,OAAO,KAAK,UAAU,OAAO,GAAG,OAAO;QAEjD,OAAO;YACH,eAAe;mBAAI;gBAAW;aAAK;QACvC;QAEA,aAAa;IACjB;IAEA,MAAM,iBAAiB,CAAC;QACpB,MAAM,eAAe,UAAU,MAAM,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK;QAC3D,aAAa;IACjB;IAEA,MAAM,sBAAsB,CAAC;QACzB,mBAAmB;IACvB;IAEA,MAAM,oBAAoB,CAAC;QACvB,iBAAiB;IACrB;IAEA,MAAM,YAAY;QACd,aAAa,EAAE;QACf,aAAa,UAAU,CAAC;IAC5B;IAEA,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;YACzB;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBACK;;;;;;AAGb;uCAEe"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///Users/ankitkumaryadav/Desktop/Olive-Edge/src/features/checkout/components/CheckoutSteps.jsx"],"sourcesContent":["import Link from 'next/link';\n\nconst CheckoutSteps = ({ step1, step2 }) => {\n    const activeStyle = \"font-sans text-xs font-bold uppercase tracking-widest text-clinical-ink\";\n    const inactiveStyle = \"font-sans text-xs uppercase tracking-widest text-clinical-ink/40 cursor-default\";\n\n    return (\n        <nav className=\"flex justify-center mb-16\">\n            <div className=\"flex items-center gap-4\">\n                {step1 ? (\n                    <Link to=\"/login\" className={activeStyle}>Identity</Link>\n                ) : (\n                    <span className={inactiveStyle}>Identity</span>\n                )}\n\n                <span className=\"text-xs text-clinical-ink/60\">/</span>\n\n                {step2 ? (\n                    <span className={activeStyle}>Checkout</span>\n                ) : (\n                    <span className={inactiveStyle}>Checkout</span>\n                )}\n\n\n\n\n            </div>\n        </nav>\n    );\n};\n\nexport default CheckoutSteps;\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,gBAAgB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE;IACnC,MAAM,cAAc;IACpB,MAAM,gBAAgB;IAEtB,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;gBACV,sBACG,8OAAC,uKAAI;oBAAC,IAAG;oBAAS,WAAW;8BAAa;;;;;6EAE1C,8OAAC;oBAAK,WAAW;8BAAe;;;;;;8BAGpC,8OAAC;oBAAK,WAAU;8BAA+B;;;;;;gBAE9C,sBACG,8OAAC;oBAAK,WAAW;8BAAa;;;;;6EAE9B,8OAAC;oBAAK,WAAW;8BAAe;;;;;;;;;;;;;;;;;AASpD;uCAEe"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///Users/ankitkumaryadav/Desktop/Olive-Edge/src/utils/razorpay.js"],"sourcesContent":["export const loadRazorpayScript = () => {\n    return new Promise((resolve) => {\n        const script = document.createElement('script');\n        script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n        script.onload = () => {\n            resolve(true);\n        };\n        script.onerror = () => {\n            resolve(false);\n        };\n        document.body.appendChild(script);\n    });\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,qBAAqB;IAC9B,OAAO,IAAI,QAAQ,CAAC;QAChB,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,OAAO,GAAG,GAAG;QACb,OAAO,MAAM,GAAG;YACZ,QAAQ;QACZ;QACA,OAAO,OAAO,GAAG;YACb,QAAQ;QACZ;QACA,SAAS,IAAI,CAAC,WAAW,CAAC;IAC9B;AACJ"}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///Users/ankitkumaryadav/Desktop/Olive-Edge/src/components/ui/AlertModal.jsx"],"sourcesContent":["'use client';\nimport { motion, AnimatePresence } from 'framer-motion'; // eslint-disable-line no-unused-vars\n\nconst AlertModal = ({ isOpen, onClose, onAction, title, message, type = 'info', actionLabel = 'Acknowledge', cancelLabel = 'Cancel' }) => {\n    // Determine colors based on type\n    const getTheme = () => {\n        switch (type) {\n            case 'success':\n                return { border: 'border-accent-moss/30', bg: 'bg-accent-moss/10', text: 'text-accent-moss', btn: 'bg-accent-moss text-white hover:bg-clinical-ink' };\n            case 'error':\n                return { border: 'border-signal-error/30', bg: 'bg-signal-error/10', text: 'text-signal-error', btn: 'bg-signal-error text-white hover:bg-red-900' };\n            case 'warning':\n                return { border: 'border-accent-bronze/30', bg: 'bg-accent-bronze/10', text: 'text-accent-bronze', btn: 'bg-accent-bronze text-white hover:bg-clinical-ink' };\n            default: // info\n                return { border: 'border-clinical-ink/10', bg: 'bg-clinical-ink/5', text: 'text-clinical-ink', btn: 'bg-clinical-ink text-white hover:bg-black' };\n        }\n    };\n\n    const theme = getTheme();\n\n    return (\n        <AnimatePresence>\n            {isOpen && (\n                <>\n                    {/* Backdrop */}\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        onClick={onClose}\n                        className=\"fixed inset-0 bg-clinical-ink/40 backdrop-blur-md z-[60] transition-colors\"\n                    />\n\n                    {/* Modal */}\n                    <div className=\"fixed inset-0 flex items-center justify-center p-4 z-[60] pointer-events-none\">\n                        <motion.div\n                            initial={{ scale: 0.95, opacity: 0, y: 10 }}\n                            animate={{ scale: 1, opacity: 1, y: 0 }}\n                            exit={{ scale: 0.95, opacity: 0, y: 10 }}\n                            className=\"bg-clinical-canvas border border-clinical-ink/10 shadow-2xl rounded-3xl p-8 md:p-12 w-full max-w-md pointer-events-auto relative overflow-hidden\"\n                        >\n                            {/* Decorative Elements */}\n                            <div className=\"absolute top-0 right-0 p-6 opacity-5 pointer-events-none\">\n                                <svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <circle cx=\"32\" cy=\"32\" r=\"31\" stroke=\"currentColor\" strokeWidth=\"1\" />\n                                </svg>\n                            </div>\n\n                            <div className={`inline-flex items-center gap-2 mb-6 px-3 py-1 rounded-full border ${theme.border} ${theme.bg}`}>\n                                <span className={`font-mono text-[10px] uppercase tracking-widest ${theme.text}`}>\n                                    {type}\n                                </span>\n                            </div>\n\n                            <h3 className=\"font-display font-black text-2xl md:text-3xl text-clinical-ink mb-4 uppercase leading-[0.9]\">\n                                {title}\n                            </h3>\n                            <p className=\"font-sans text-sm text-clinical-ink/60 mb-10 leading-relaxed\">\n                                {message}\n                            </p>\n\n                            <div className=\"flex gap-4\">\n                                {onAction && (\n                                    <button\n                                        onClick={onClose}\n                                        className=\"flex-1 py-4 bg-transparent border border-clinical-ink/20 text-clinical-ink hover:bg-clinical-ink/5 font-sans text-[10px] uppercase tracking-[0.2em] font-bold transition-all duration-300 rounded-full\"\n                                    >\n                                        {cancelLabel}\n                                    </button>\n                                )}\n                                <button\n                                    onClick={onAction || onClose}\n                                    className={`flex-1 py-4 ${theme.btn} font-sans text-[10px] uppercase tracking-[0.2em] font-bold transition-all duration-300 rounded-full shadow-lg`}\n                                >\n                                    {actionLabel}\n                                </button>\n                            </div>\n                        </motion.div>\n                    </div>\n                </>\n            )}\n        </AnimatePresence>\n    );\n};\n\nexport default AlertModal;\n"],"names":[],"mappings":";;;;;AACA,oUAAyD,qCAAqC;AAA9F;AADA;;;AAGA,MAAM,aAAa,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,MAAM,EAAE,cAAc,aAAa,EAAE,cAAc,QAAQ,EAAE;IACjI,iCAAiC;IACjC,MAAM,WAAW;QACb,OAAQ;YACJ,KAAK;gBACD,OAAO;oBAAE,QAAQ;oBAAyB,IAAI;oBAAqB,MAAM;oBAAoB,KAAK;gBAAkD;YACxJ,KAAK;gBACD,OAAO;oBAAE,QAAQ;oBAA0B,IAAI;oBAAsB,MAAM;oBAAqB,KAAK;gBAA8C;YACvJ,KAAK;gBACD,OAAO;oBAAE,QAAQ;oBAA2B,IAAI;oBAAuB,MAAM;oBAAsB,KAAK;gBAAoD;YAChK;gBACI,OAAO;oBAAE,QAAQ;oBAA0B,IAAI;oBAAqB,MAAM;oBAAqB,KAAK;gBAA4C;QACxJ;IACJ;IAEA,MAAM,QAAQ;IAEd,qBACI,8OAAC,4MAAe;kBACX,wBACG;;8BAEI,8OAAC,oMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,MAAM;wBAAE,SAAS;oBAAE;oBACnB,SAAS;oBACT,WAAU;;;;;;8BAId,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC,oMAAM,CAAC,GAAG;wBACP,SAAS;4BAAE,OAAO;4BAAM,SAAS;4BAAG,GAAG;wBAAG;wBAC1C,SAAS;4BAAE,OAAO;4BAAG,SAAS;4BAAG,GAAG;wBAAE;wBACtC,MAAM;4BAAE,OAAO;4BAAM,SAAS;4BAAG,GAAG;wBAAG;wBACvC,WAAU;;0CAGV,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC;oCAAI,OAAM;oCAAK,QAAO;oCAAK,SAAQ;oCAAY,MAAK;oCAAO,OAAM;8CAC9D,cAAA,8OAAC;wCAAO,IAAG;wCAAK,IAAG;wCAAK,GAAE;wCAAK,QAAO;wCAAe,aAAY;;;;;;;;;;;;;;;;0CAIzE,8OAAC;gCAAI,WAAW,CAAC,kEAAkE,EAAE,MAAM,MAAM,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE;0CAC3G,cAAA,8OAAC;oCAAK,WAAW,CAAC,gDAAgD,EAAE,MAAM,IAAI,EAAE;8CAC3E;;;;;;;;;;;0CAIT,8OAAC;gCAAG,WAAU;0CACT;;;;;;0CAEL,8OAAC;gCAAE,WAAU;0CACR;;;;;;0CAGL,8OAAC;gCAAI,WAAU;;oCACV,0BACG,8OAAC;wCACG,SAAS;wCACT,WAAU;kDAET;;;;;;kDAGT,8OAAC;wCACG,SAAS,YAAY;wCACrB,WAAW,CAAC,YAAY,EAAE,MAAM,GAAG,CAAC,8GAA8G,CAAC;kDAElJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrC;uCAEe"}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":["file:///Users/ankitkumaryadav/Desktop/Olive-Edge/src/app/shipping/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useContext, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport CartContext from '../../context/CartContext';\nimport AuthContext from '../../context/AuthContext';\nimport CheckoutSteps from '../../features/checkout/components/CheckoutSteps';\n// import { Helmet } from 'react-helmet-async';\nimport api from '../../lib/api';\nimport { toast } from 'react-toastify';\nimport { loadRazorpayScript } from '../../utils/razorpay';\nimport { motion } from 'framer-motion';\nimport AlertModal from '../../components/ui/AlertModal';\n\ndeclare global {\n    interface Window {\n        Razorpay: any;\n    }\n}\n\nconst ShippingPage = () => {\n    const { shippingAddress, saveShippingAddress, cartItems, clearCart } = useContext(CartContext) as any;\n    const { user } = useContext(AuthContext) as any;\n    const router = useRouter();\n\n    const [address, setAddress] = useState(shippingAddress.address || '');\n    const [city, setCity] = useState(shippingAddress.city || '');\n    const [postalCode, setPostalCode] = useState(shippingAddress.postalCode || '');\n    const [country, setCountry] = useState(shippingAddress.country || '');\n    const [isSuccessModalOpen, setIsSuccessModalOpen] = useState(false);\n    const [successOrderId, setSuccessOrderId] = useState(null);\n\n    const [isProcessing, setIsProcessing] = useState(false);\n\n    // Calculate Prices\n    const addDecimals = (num: number) => {\n        return (Math.round(num * 100) / 100).toFixed(2);\n    };\n\n    const itemsPrice = addDecimals(cartItems.reduce((acc: number, item: any) => acc + item.price * item.qty, 0) as any);\n    const shippingPrice = addDecimals(Number(itemsPrice) > 2000 ? 0 : 100);\n    const taxPrice = addDecimals(Number((0.15 * Number(itemsPrice)).toFixed(2)));\n    const totalPrice = (Number(itemsPrice) + Number(shippingPrice) + Number(taxPrice)).toFixed(2);\n\n    useEffect(() => {\n        if (cartItems.length === 0) {\n            router.push('/cart');\n        }\n    }, [cartItems, router]);\n\n    const handlePayment = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!address || !city || !postalCode || !country) {\n            toast.error(\"Please fill in all shipping fields.\");\n            return;\n        }\n\n        setIsProcessing(true);\n\n        // 1. Save Address\n        saveShippingAddress({ address, city, postalCode, country });\n\n        try {\n            // 2. Load Razorpay SDK\n            const res = await loadRazorpayScript();\n            if (!res) {\n                toast.error('Razorpay SDK failed to load. Are you online?');\n                setIsProcessing(false);\n                return;\n            }\n\n            // 3. Create Order on Backend\n            // We pass the simplified order structure. The backend expects:\n            // orderItems, shippingAddress, paymentMethod, itemsPrice, taxPrice, shippingPrice, totalPrice\n            const orderPayload = {\n                orderItems: cartItems,\n                shippingAddress: { address, city, postalCode, country },\n                paymentMethod: 'Razorpay',\n                itemsPrice,\n                shippingPrice,\n                taxPrice,\n                totalPrice,\n            };\n\n            const { data: createdOrder } = await api.post('/api/orders', orderPayload);\n\n            // 4. Create Razorpay Order\n            const { data: razorpayOrder } = await api.post('/api/payment/create-order', {\n                amount: totalPrice,\n                receipt: createdOrder._id,\n            });\n\n            // 5. Open Razorpay Modal\n            const options = {\n                key: process.env.NEXT_PUBLIC_RAZORPAY_KEY_ID || '', // Make sure this env var is available\n                amount: razorpayOrder.amount,\n                currency: razorpayOrder.currency,\n                name: \"Olive Edge\",\n                description: `Order #${createdOrder._id}`,\n                order_id: razorpayOrder.id,\n                handler: async function (response: any) {\n                    try {\n                        const verifyRes = await api.post('/api/payment/verify', {\n                            razorpay_order_id: response.razorpay_order_id,\n                            razorpay_payment_id: response.razorpay_payment_id,\n                            razorpay_signature: response.razorpay_signature,\n                            orderId: createdOrder._id,\n                        });\n\n                        if (verifyRes.data.status === 'success') {\n                            clearCart();\n                            // TRIGGER MODAL INSTEAD OF TOAST\n                            setSuccessOrderId(createdOrder._id);\n                            setIsSuccessModalOpen(true);\n                        }\n                    } catch (error) {\n                        toast.error('Payment Verification Failed');\n                        console.error(error);\n                        // Even if verification details fail on frontend, the order exists.\n                        // Redirect user to order page to see status (likely unpaid/pending if verification failed entirely)\n                        router.push(`/order/${createdOrder._id}`);\n                    }\n                },\n                prefill: {\n                    name: user?.name,\n                    email: user?.email,\n                    contact: user?.phone || '',\n                },\n                theme: {\n                    color: \"#606C38\",\n                },\n            };\n\n            const paymentObject = new window.Razorpay(options);\n            paymentObject.open();\n            setIsProcessing(false); // Modal is open, processing 'waiting' is done\n\n        } catch (error: any) {\n            toast.error(error.response && error.response.data.message ? error.response.data.message : error.message);\n            setIsProcessing(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-clinical-canvas pt-32 pb-40\">\n            {/* Metadata could be handled here */}\n\n            <div className=\"container mx-auto px-container-sm md:px-container-md lg:px-container-lg\">\n                <CheckoutSteps step1 step2 />\n\n                <div className=\"text-center mb-16\">\n                    <span className=\"font-sans text-[10px] uppercase tracking-[0.2em] text-clinical-ink/40 mb-4 block\">\n                        Final Step\n                    </span>\n                    <h1 className=\"font-display font-black text-5xl md:text-7xl lg:text-heading-main text-clinical-ink mb-8 leading-[0.9] uppercase\">\n                        Checkout\n                    </h1>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-24\">\n                    {/* Left Column: Input Form */}\n                    <div className=\"space-y-12\">\n                        <div className=\"border-b border-black pb-4 mb-8\">\n                            <h2 className=\"font-sans text-[10px] font-bold uppercase tracking-[0.2em] text-clinical-ink/60\">\n                                Shipping Details\n                            </h2>\n                        </div>\n\n                        <form id=\"checkout-form\" onSubmit={handlePayment} className=\"space-y-8\">\n\n                            {/* Saved Address Selection */}\n                            {user && user.addresses && user.addresses.length > 0 && (\n                                <div className=\"mb-8\">\n                                    <label className=\"block font-sans text-[10px] uppercase tracking-widest text-clinical-ink/60 mb-2\">\n                                        Select Saved Location\n                                    </label>\n                                    <select\n                                        onChange={(e) => {\n                                            const selectedIndex = parseInt(e.target.value);\n                                            if (!isNaN(selectedIndex)) {\n                                                const addr = user.addresses[selectedIndex];\n                                                setAddress(addr.address);\n                                                setCity(addr.city);\n                                                setPostalCode(addr.postalCode);\n                                                setCountry(addr.country);\n                                            }\n                                        }}\n                                        className=\"w-full bg-white/50 border border-clinical-ink/20 rounded-lg p-3 font-sans text-sm text-clinical-ink focus:border-accent-bronze outline-none appearance-none\"\n                                        defaultValue=\"\"\n                                    >\n                                        <option value=\"\" disabled>-- Use a Saved Address --</option>\n                                        {user.addresses.map((addr: any, index: number) => (\n                                            <option key={index} value={index}>\n                                                {addr.address}, {addr.city}\n                                            </option>\n                                        ))}\n                                    </select>\n                                </div>\n                            )}\n\n                            <div className=\"aesop-input-group\">\n                                <input\n                                    type=\"text\"\n                                    value={address}\n                                    onChange={(e) => setAddress(e.target.value)}\n                                    required\n                                    className=\"aesop-input peer placeholder-transparent\"\n                                    placeholder=\"Street Address\"\n                                    id=\"address\"\n                                />\n                                <label htmlFor=\"address\">Street Address</label>\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-8\">\n                                <div className=\"aesop-input-group\">\n                                    <input\n                                        type=\"text\"\n                                        value={city}\n                                        onChange={(e) => setCity(e.target.value)}\n                                        required\n                                        className=\"aesop-input peer placeholder-transparent\"\n                                        placeholder=\"City\"\n                                        id=\"city\"\n                                    />\n                                    <label htmlFor=\"city\">City</label>\n                                </div>\n                                <div className=\"aesop-input-group\">\n                                    <input\n                                        type=\"text\"\n                                        value={postalCode}\n                                        onChange={(e) => setPostalCode(e.target.value)}\n                                        required\n                                        className=\"aesop-input peer placeholder-transparent\"\n                                        placeholder=\"Postal Code\"\n                                        id=\"postalCode\"\n                                    />\n                                    <label htmlFor=\"postalCode\">Postal Code</label>\n                                </div>\n                            </div>\n\n                            <div className=\"aesop-input-group\">\n                                <input\n                                    type=\"text\"\n                                    value={country}\n                                    onChange={(e) => setCountry(e.target.value)}\n                                    required\n                                    className=\"aesop-input peer placeholder-transparent\"\n                                    placeholder=\"Country\"\n                                    id=\"country\"\n                                />\n                                <label htmlFor=\"country\">Country</label>\n                            </div>\n                        </form>\n                    </div>\n\n                    {/* Right Column: Order Summary */}\n                    <div className=\"space-y-8\">\n                        <div className=\"border-b border-black pb-4 mb-4\">\n                            <h2 className=\"font-sans text-[10px] font-bold uppercase tracking-[0.2em] text-clinical-ink/60\">\n                                Order Summary\n                            </h2>\n                        </div>\n\n                        {/* Items List */}\n                        <div className=\"max-h-96 overflow-y-auto pr-4 space-y-6\">\n                            {cartItems.map((item: any, index: number) => (\n                                <div key={index} className=\"flex items-center gap-6 group\">\n                                    <div className=\"w-16 h-20 bg-clinical-bone overflow-hidden rounded-lg flex-shrink-0\">\n                                        <img src={item.image} alt={item.name} className=\"w-full h-full object-contain mix-blend-multiply\" />\n                                    </div>\n                                    <div className=\"flex-1\">\n                                        <div className=\"font-serif text-base text-clinical-ink block truncate\">\n                                            {item.name}\n                                        </div>\n                                        <span className=\"font-mono text-[10px] text-clinical-ink/60\">\n                                            Qty: {item.qty} | Size: {item.size || 'N/A'}\n                                        </span>\n                                    </div>\n                                    <div className=\"font-mono text-sm text-clinical-ink\">\n                                        ₹ {item.price * item.qty}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n\n                        {/* Totals */}\n                        <div className=\"bg-white/40 backdrop-blur-sm border border-clinical-ink/5 p-8 rounded-3xl mt-8\">\n                            <div className=\"space-y-4 font-sans text-[10px] uppercase tracking-widest border-b border-clinical-ink/10 pb-6 mb-6\">\n                                <div className=\"flex justify-between\">\n                                    <span className=\"text-clinical-ink/60\">Subtotal</span>\n                                    <span className=\"font-mono text-clinical-ink\">₹ {itemsPrice}</span>\n                                </div>\n                                <div className=\"flex justify-between\">\n                                    <span className=\"text-clinical-ink/60\">Shipping</span>\n                                    <span className=\"font-mono text-clinical-ink\">₹ {shippingPrice}</span>\n                                </div>\n                                <div className=\"flex justify-between\">\n                                    <span className=\"text-clinical-ink/60\">Tax (15%)</span>\n                                    <span className=\"font-mono text-clinical-ink\">₹ {taxPrice}</span>\n                                </div>\n                            </div>\n                            <div className=\"flex justify-between font-serif text-xl text-clinical-ink mb-8\">\n                                <span>Total</span>\n                                <span className=\"font-mono text-lg font-bold\">₹ {totalPrice}</span>\n                            </div>\n\n                            <motion.button\n                                whileHover={{ scale: 1.02 }}\n                                whileTap={{ scale: 0.98 }}\n                                type=\"submit\"\n                                form=\"checkout-form\"\n                                disabled={cartItems.length === 0 || isProcessing}\n                                className=\"w-full py-5 bg-clinical-ink text-white font-sans text-xs uppercase tracking-[0.2em] hover:bg-black transition-all duration-500 disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-4 rounded-full shadow-xl\"\n                            >\n                                {isProcessing ? (\n                                    <>\n                                        <div className=\"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                                        Processing...\n                                    </>\n                                ) : (\n                                    `Pay ₹ {totalPrice}`\n                                )}\n                            </motion.button>\n                            <p className=\"text-center mt-4 font-sans text-[9px] text-clinical-ink/40 uppercase tracking-widest\">\n                                Secured by Razorpay\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <AlertModal\n                isOpen={isSuccessModalOpen}\n                onClose={() => {\n                    setIsSuccessModalOpen(false);\n                    router.push(`/order/${successOrderId}`);\n                }}\n                title=\"Transaction Approved\"\n                message={`Payment validated successfully. Order #${successOrderId} has been initialized.`}\n                type=\"success\"\n                actionLabel=\"Proceed to Receipt\"\n                onAction={() => router.push(`/order/${successOrderId}`)}\n            />\n        </div>\n    );\n};\n\nexport default ShippingPage;\n"],"names":[],"mappings":"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"}}]
}