module.exports=[16302,a=>{"use strict";var b=a.i(87924),c=a.i(46271),d=a.i(62036);a.s(["default",0,({isOpen:a,onClose:e,onAction:f,title:g,message:h,type:i="info",actionLabel:j="Acknowledge",cancelLabel:k="Cancel"})=>{let l=(()=>{switch(i){case"success":return{border:"border-accent-moss/30",bg:"bg-accent-moss/10",text:"text-accent-moss",btn:"bg-accent-moss text-white hover:bg-clinical-ink"};case"error":return{border:"border-signal-error/30",bg:"bg-signal-error/10",text:"text-signal-error",btn:"bg-signal-error text-white hover:bg-red-900"};case"warning":return{border:"border-accent-bronze/30",bg:"bg-accent-bronze/10",text:"text-accent-bronze",btn:"bg-accent-bronze text-white hover:bg-clinical-ink"};default:return{border:"border-clinical-ink/10",bg:"bg-clinical-ink/5",text:"text-clinical-ink",btn:"bg-clinical-ink text-white hover:bg-black"}}})();return(0,b.jsx)(d.AnimatePresence,{children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-clinical-ink/40 backdrop-blur-md z-[60] transition-colors"}),(0,b.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-[60] pointer-events-none",children:(0,b.jsxs)(c.motion.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},className:"bg-clinical-canvas border border-clinical-ink/10 shadow-2xl rounded-3xl p-8 md:p-12 w-full max-w-md pointer-events-auto relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 p-6 opacity-5 pointer-events-none",children:(0,b.jsx)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("circle",{cx:"32",cy:"32",r:"31",stroke:"currentColor",strokeWidth:"1"})})}),(0,b.jsx)("div",{className:`inline-flex items-center gap-2 mb-6 px-3 py-1 rounded-full border ${l.border} ${l.bg}`,children:(0,b.jsx)("span",{className:`font-mono text-[10px] uppercase tracking-widest ${l.text}`,children:i})}),(0,b.jsx)("h3",{className:"font-display font-black text-2xl md:text-3xl text-clinical-ink mb-4 uppercase leading-[0.9]",children:g}),(0,b.jsx)("p",{className:"font-sans text-sm text-clinical-ink/60 mb-10 leading-relaxed",children:h}),(0,b.jsxs)("div",{className:"flex gap-4",children:[f&&(0,b.jsx)("button",{onClick:e,className:"flex-1 py-4 bg-transparent border border-clinical-ink/20 text-clinical-ink hover:bg-clinical-ink/5 font-sans text-[10px] uppercase tracking-[0.2em] font-bold transition-all duration-300 rounded-full",children:k}),(0,b.jsx)("button",{onClick:f||e,className:`flex-1 py-4 ${l.btn} font-sans text-[10px] uppercase tracking-[0.2em] font-bold transition-all duration-300 rounded-full shadow-lg`,children:j})]})]})})]})})}])},12725,a=>{"use strict";a.s(["loadRazorpayScript",0,()=>new Promise(a=>{let b=document.createElement("script");b.src="https://checkout.razorpay.com/v1/checkout.js",b.onload=()=>{a(!0)},b.onerror=()=>{a(!1)},document.body.appendChild(b)})])},37572,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(6650);var e=a.i(24668);a.i(29615);var f=a.i(59033),g=a.i(38246);let h=({step1:a,step2:c})=>{let d="font-sans text-xs font-bold uppercase tracking-widest text-clinical-ink",e="font-sans text-xs uppercase tracking-widest text-clinical-ink/40 cursor-default";return(0,b.jsx)("nav",{className:"flex justify-center mb-16",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[a?(0,b.jsx)(g.default,{href:"/login",className:d,children:"Identity"}):(0,b.jsx)("span",{className:e,children:"Identity"}),(0,b.jsx)("span",{className:"text-xs text-clinical-ink/60",children:"/"}),c?(0,b.jsx)("span",{className:d,children:"Checkout"}):(0,b.jsx)("span",{className:e,children:"Checkout"})]})})};var i=a.i(19032),j=a.i(20094),k=a.i(12725),l=a.i(46271),m=a.i(16302),n=a.i(17867);a.s(["default",0,()=>{let{shippingAddress:a,saveShippingAddress:g,cartItems:o,clearCart:p}=(0,c.useContext)(e.CartContext),{user:q}=(0,c.useContext)(f.AuthContext),r=(0,d.useRouter)(),[s,t]=(0,c.useState)(a.address||""),[u,v]=(0,c.useState)(a.city||""),[w,x]=(0,c.useState)(a.postalCode||""),[y,z]=(0,c.useState)(a.country||""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1),G=a=>(Math.round(100*a)/100).toFixed(2),H=G(o.reduce((a,b)=>a+b.price*b.qty,0)),I=G(Number(H)>2e3?0:100),J=G(Number((.15*Number(H)).toFixed(2))),K=(Number(H)+Number(I)+Number(J)).toFixed(2);(0,c.useEffect)(()=>{0===o.length&&r.push("/cart")},[o,r]);let L=async a=>{if(a.preventDefault(),!s||!u||!w||!y)return void j.toast.error("Please fill in all shipping fields.");F(!0),g({address:s,city:u,postalCode:w,country:y});try{if(!await (0,k.loadRazorpayScript)()){j.toast.error("Razorpay SDK failed to load. Are you online?"),F(!1);return}let{data:a}=await i.default.post("/api/orders",{orderItems:o,shippingAddress:{address:s,city:u,postalCode:w,country:y},paymentMethod:"Razorpay",itemsPrice:H,shippingPrice:I,taxPrice:J,totalPrice:K}),{data:b}=await i.default.post("/api/payment/create-order",{amount:K,receipt:a._id}),c={key:"rzp_test_Rvob51iGONRFfg",amount:b.amount,currency:b.currency,name:"Olive Edge",description:`Order #${a._id}`,order_id:b.id,handler:async function(b){try{let c=await i.default.post("/api/payment/verify",{razorpay_order_id:b.razorpay_order_id,razorpay_payment_id:b.razorpay_payment_id,razorpay_signature:b.razorpay_signature,orderId:a._id});"success"===c.data.status&&(p(),D(a._id),B(!0))}catch(b){j.toast.error("Payment Verification Failed: "+(0,n.getErrorMessage)(b)),console.error(b),r.push(`/order/${a._id}`)}},prefill:{name:q?.name,email:q?.email,contact:q?.phone||""},theme:{color:"#606C38"}};new window.Razorpay(c).open(),F(!1)}catch(a){j.toast.error((0,n.getErrorMessage)(a)),F(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-clinical-canvas pt-20 md:pt-32 pb-40",children:[(0,b.jsxs)("div",{className:"container mx-auto px-container-sm md:px-container-md lg:px-container-lg",children:[(0,b.jsx)(h,{step1:!0,step2:!0}),(0,b.jsxs)("div",{className:"text-center mb-16",children:[(0,b.jsx)("span",{className:"font-sans text-[10px] uppercase tracking-[0.2em] text-clinical-ink/40 mb-4 block",children:"Final Step"}),(0,b.jsx)("h1",{className:"font-display font-black text-5xl md:text-7xl lg:text-heading-main text-clinical-ink mb-8 leading-[0.9] uppercase",children:"Checkout"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-24",children:[(0,b.jsxs)("div",{className:"space-y-12",children:[(0,b.jsx)("div",{className:"border-b border-black pb-4 mb-8",children:(0,b.jsx)("h2",{className:"font-sans text-[10px] font-bold uppercase tracking-[0.2em] text-clinical-ink/60",children:"Shipping Details"})}),(0,b.jsxs)("form",{id:"checkout-form",onSubmit:L,className:"space-y-8",children:[q&&q.addresses&&q.addresses.length>0&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("label",{className:"block font-sans text-[10px] uppercase tracking-widest text-clinical-ink/60 mb-2",children:"Select Saved Location"}),(0,b.jsxs)("select",{onChange:a=>{let b=parseInt(a.target.value);if(!isNaN(b)&&q.addresses){let a=q.addresses[b];t(a.address||""),v(a.city||""),x(a.postalCode||""),z(a.country||"")}},className:"w-full bg-white/50 border border-clinical-ink/20 rounded-lg p-3 font-sans text-sm text-clinical-ink focus:border-accent-bronze outline-none appearance-none",defaultValue:"",children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"-- Use a Saved Address --"}),q.addresses.map((a,c)=>(0,b.jsxs)("option",{value:c,children:[a.address,", ",a.city]},c))]})]}),(0,b.jsxs)("div",{className:"aesop-input-group",children:[(0,b.jsx)("input",{type:"text",value:s,onChange:a=>t(a.target.value),required:!0,className:"aesop-input peer placeholder-transparent",placeholder:"Street Address",id:"address"}),(0,b.jsx)("label",{htmlFor:"address",children:"Street Address"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"aesop-input-group",children:[(0,b.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value),required:!0,className:"aesop-input peer placeholder-transparent",placeholder:"City",id:"city"}),(0,b.jsx)("label",{htmlFor:"city",children:"City"})]}),(0,b.jsxs)("div",{className:"aesop-input-group",children:[(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),required:!0,className:"aesop-input peer placeholder-transparent",placeholder:"Postal Code",id:"postalCode"}),(0,b.jsx)("label",{htmlFor:"postalCode",children:"Postal Code"})]})]}),(0,b.jsxs)("div",{className:"aesop-input-group",children:[(0,b.jsx)("input",{type:"text",value:y,onChange:a=>z(a.target.value),required:!0,className:"aesop-input peer placeholder-transparent",placeholder:"Country",id:"country"}),(0,b.jsx)("label",{htmlFor:"country",children:"Country"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)("div",{className:"border-b border-black pb-4 mb-4",children:(0,b.jsx)("h2",{className:"font-sans text-[10px] font-bold uppercase tracking-[0.2em] text-clinical-ink/60",children:"Order Summary"})}),(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto pr-4 space-y-6",children:o.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-6 group",children:[(0,b.jsx)("div",{className:"w-16 h-20 bg-clinical-bone overflow-hidden rounded-lg flex-shrink-0",children:(0,b.jsx)("img",{src:a.image,alt:a.name,className:"w-full h-full object-contain mix-blend-multiply"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-serif text-base text-clinical-ink block truncate",children:a.name}),(0,b.jsxs)("span",{className:"font-mono text-[10px] text-clinical-ink/60",children:["Qty: ",a.qty," | Size: ",a.size||"N/A"]})]}),(0,b.jsxs)("div",{className:"font-mono text-sm text-clinical-ink",children:["₹ ",a.price*a.qty]})]},c))}),(0,b.jsxs)("div",{className:"bg-white/40 backdrop-blur-sm border border-clinical-ink/5 p-8 rounded-3xl mt-8",children:[(0,b.jsxs)("div",{className:"space-y-4 font-sans text-[10px] uppercase tracking-widest border-b border-clinical-ink/10 pb-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-clinical-ink/60",children:"Subtotal"}),(0,b.jsxs)("span",{className:"font-mono text-clinical-ink",children:["₹ ",H]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-clinical-ink/60",children:"Shipping"}),(0,b.jsxs)("span",{className:"font-mono text-clinical-ink",children:["₹ ",I]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-clinical-ink/60",children:"Tax (15%)"}),(0,b.jsxs)("span",{className:"font-mono text-clinical-ink",children:["₹ ",J]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-serif text-xl text-clinical-ink mb-8",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{className:"font-mono text-lg font-bold",children:["₹ ",K]})]}),(0,b.jsx)(l.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",form:"checkout-form",disabled:0===o.length||E,className:"w-full py-5 bg-clinical-ink text-white font-sans text-xs uppercase tracking-[0.2em] hover:bg-black transition-all duration-500 disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-4 rounded-full shadow-xl",children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):`Pay ₹ ${K}`}),(0,b.jsx)("p",{className:"text-center mt-4 font-sans text-[9px] text-clinical-ink/40 uppercase tracking-widest",children:"Secured by Razorpay"})]})]})]})]}),(0,b.jsx)(m.default,{isOpen:A,onClose:()=>{B(!1),r.push(`/order/${C}`)},title:"Transaction Approved",message:`Payment validated successfully. Order #${C} has been initialized.`,type:"success",actionLabel:"Proceed to Receipt",onAction:()=>r.push(`/order/${C}`)})]})}],37572)}];

//# sourceMappingURL=src_3453c977._.js.map